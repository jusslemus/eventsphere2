<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EventSphere - Descubre, conecta y vive experiencias inolvidables</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 100 100%27><text y=%27.9em%27 font-size=%2790%27>ğŸ“…</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Navbar -->
    <nav class="navbar-eventsphere fixed w-full top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <a href="index.html" class="logo">ğŸ“… EventSphere</a>
                <div class="flex items-center space-x-4" id="navbarMenu"></div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="pt-16">
        <div class="hero-eventsphere">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="icon-sparkles">âœ¨</span>
                    EventSphere
                </h1>
                <p class="hero-subtitle">Descubre, conecta y vive experiencias inolvidables</p>
                
                <div class="hero-buttons">
                    <a href="register.html" class="btn-hero-primary">ğŸ‘¤ Ãšnete Gratis</a>
                    <a href="login.html" class="btn-hero-secondary">ğŸ¯ Iniciar SesiÃ³n</a>
                </div>

                <div class="category-pills">
                    <a href="eventos.html?categoria=1" class="category-pill">ğŸµ Conciertos</a>
                    <a href="eventos.html?categoria=3" class="category-pill">âš½ Deportes</a>
                    <a href="eventos.html?categoria=2" class="category-pill">ğŸ¤ Conferencias</a>
                    <a href="eventos.html?categoria=4" class="category-pill">ğŸ¨ Arte</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Features Section -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-800 mb-4">ğŸ Â¿Por quÃ© unirte a EventSphere?</h2>
            <p class="text-xl text-gray-600">Crea tu cuenta gratis y desbloquea todas las funciones</p>
        </div>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">ğŸ«</div>
                <h3 class="feature-title">Compra Boletos</h3>
                <p class="feature-description">Accede a eventos exclusivos con tickets digitales y cÃ³digos QR</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">â•</div>
                <h3 class="feature-title">Crea Eventos</h3>
                <p class="feature-description">Organiza tus propios eventos y gestiona asistentes fÃ¡cilmente</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">ğŸ’¬</div>
                <h3 class="feature-title">InteractÃºa</h3>
                <p class="feature-description">Chatea con otros asistentes y comparte fotos de los eventos</p>
            </div>

            <div class="feature-card">
                <div class="feature-icon">ğŸ“±</div>
                <h3 class="feature-title">Valida Entradas</h3>
                <p class="feature-description">Escanea cÃ³digos QR en tiempo real para validar asistencia</p>
            </div>
        </div>
    </div>

    <!-- Eventos Destacados -->
    <div class="bg-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h2 class="text-4xl font-bold text-gray-800 mb-2">ğŸ‰ PrÃ³ximos Eventos</h2>
                    <p class="text-xl text-gray-600">Descubre las mejores experiencias cerca de ti</p>
                </div>
                <a href="eventos.html" class="btn btn-primary">Ver Todos â†’</a>
            </div>

            <!-- Grid de Eventos -->
            <div id="eventos-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Loading -->
                <div class="col-span-full text-center py-12">
                    <div class="animate-spin text-5xl mb-4">â³</div>
                    <p class="text-gray-500">Cargando eventos...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer-eventsphere">
        <div class="max-w-7xl mx-auto">
            <p class="footer-title">EventSphere 2025</p>
            <p class="footer-subtitle">Transformando eventos en experiencias colaborativas</p>
        </div>
    </footer>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/utils.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const usuario = getUsuarioActual();
            const navbarMenu = document.getElementById('navbarMenu');
            
            // Cargar eventos destacados
            cargarEventosDestacados();
            
            if (usuario && usuario.id) {
                navbarMenu.innerHTML = `
                    <a href="eventos.html" class="nav-link">Eventos</a>
                    <a href="mis-boletos.html" class="nav-link">Mis Boletos</a>
                    <a href="crear-evento.html" class="nav-link">Crear Evento</a>
                    <a href="mi-perfil.html" class="nav-link">Mi Perfil</a>
                    <button onclick="logout()" class="btn btn-secondary">Cerrar SesiÃ³n</button>
                `;
            } else {
                navbarMenu.innerHTML = `
                    <a href="eventos.html" class="nav-link">Eventos</a>
                    <a href="crear-evento.html" class="nav-link">Crear Evento</a>
                    <a href="mi-perfil.html" class="nav-link">Mi Perfil</a>
                    <a href="login.html" class="btn btn-primary">Iniciar SesiÃ³n</a>
                    <a href="register.html" class="btn btn-secondary">Registrarse</a>
                `;
            }
        });

        // FunciÃ³n para cargar eventos destacados
        async function cargarEventosDestacados() {
            try {
                const response = await fetch(`${API_URL}/eventos/index.php?limit=6`);
                const data = await response.json();
                
                const eventosGrid = document.getElementById('eventos-grid');
                
                if (data.success && data.eventos && data.eventos.length > 0) {
                    eventosGrid.innerHTML = data.eventos.map(evento => `
                        <div class="card hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2">
                            <div class="aspect-video bg-gradient-to-br from-indigo-500 to-purple-600 rounded-t-lg flex items-center justify-center text-white text-6xl">
                                ${getCategoriaIcon(evento.categoria_id)}
                            </div>
                            <div class="p-6">
                                <span class="inline-block px-3 py-1 text-sm font-semibold text-indigo-600 bg-indigo-100 rounded-full mb-3">
                                    ${evento.categoria_nombre || 'Evento'}
                                </span>
                                <h3 class="text-xl font-bold text-gray-800 mb-2 line-clamp-2">${evento.titulo}</h3>
                                <p class="text-gray-600 mb-4 line-clamp-2">${evento.descripcion}</p>
                                <div class="space-y-2 text-sm text-gray-500 mb-4">
                                    <div class="flex items-center">
                                        <span class="mr-2">ğŸ“…</span>
                                        <span>${formatDate(evento.fecha_evento)}</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="mr-2">ğŸ“</span>
                                        <span>${evento.ubicacion}</span>
                                    </div>
                                    <div class="flex items-center">
                                        <span class="mr-2">ğŸ’°</span>
                                        <span class="font-bold text-indigo-600">${formatPrice(evento.precio_boleto)}</span>
                                    </div>
                                </div>
                                <a href="evento-detalle.html?id=${evento.id}" class="btn btn-primary w-full text-center">
                                    Ver Detalles â†’
                                </a>
                            </div>
                        </div>
                    `).join('');
                } else {
                    eventosGrid.innerHTML = `
                        <div class="col-span-full text-center py-12">
                            <div class="text-6xl mb-4">ğŸ“…</div>
                            <p class="text-gray-500 text-xl mb-4">No hay eventos disponibles</p>
                            <a href="crear-evento.html" class="btn btn-primary">Crear el Primer Evento</a>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error cargando eventos:', error);
                document.getElementById('eventos-grid').innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <div class="text-6xl mb-4">âš ï¸</div>
                        <p class="text-gray-500 text-xl">Error al cargar eventos</p>
                    </div>
                `;
            }
        }

        // Helper para iconos de categorÃ­as
        function getCategoriaIcon(categoriaId) {
            const iconos = {
                1: 'ğŸµ',
                2: 'ğŸ¤',
                3: 'âš½',
                4: 'ğŸ¨',
                5: 'ğŸ‰',
                6: 'ğŸ½ï¸'
            };
            return iconos[categoriaId] || 'ğŸ­';
        }
    </script>
</body>
</html>
